(()=>{"use strict";var e,t={};e={"Player joined":{name:"Player joined",hoverTip:"Event is triggered when player joins server",motionStart:!1,motionNext:!0,inputs:[],outputs:[{name:"Player",hoverTip:"Player that joined server",type:"player"}],isEvent:!0}},t={...t,...e};var n=null,o=null,d=null,i=null,l={width:1280,height:720},r={x:0,y:0},s=1;function a(){let e=window.innerWidth,t=window.innerHeight;l.width=e,l.height=t,n.canvas.width=e,n.canvas.height=t}!function(){if(n&&o&&d&&i)return;let e=document.getElementById("editor-canvas");n=e?.getContext("2d"),o=document.getElementById("editor-window"),d=document.getElementById("editor-canvas"),i=document.querySelector(":root"),a(),addEventListener("resize",a)}();const c="qwsertyuiopasdfghjklzxcvbnbmQWERETYUIOPASDFDGHJKJLZXCXVBNBM123454567890";function u(e=16){let t="";for(;t.length<e;)t+=c.charAt(Math.random()*c.length);return t}const y={x:0,y:0};function m(e){d.style.cursor=e}addEventListener("mousemove",(function(e){y.x=e.clientX,y.y=e.clientY})),addEventListener("mousedown",(e=>{let t=new CustomEvent("mousePressed",{detail:{button:e.button}});window.dispatchEvent(t)})),addEventListener("mouseup",(e=>{let t=new CustomEvent("mouseReleased",{detail:{button:e.button}});window.dispatchEvent(t)}));var p={active:!1,holding:!1,x:0,y:0};function v(e,t){return{x:(e-l.width/2-r.x*s)/s,y:(t-l.height/2-r.y*s)/s}}function h(){if(!p.holding)return;let e=y.x-p.x,t=y.y-p.y;r.x+=e/s,r.y+=t/s,p.x=y.x,p.y=y.y,i.style.setProperty("--board-x",`${r.x}px`),i.style.setProperty("--board-y",`${r.y}px`),requestAnimationFrame(h)}addEventListener("keyPressed",(e=>{" "==e.detail.key&&(m("grab"),p.active=!0)})),addEventListener("keyReleased",(e=>{" "==e.detail.key&&p.active&&(m("default"),p.active=!1)})),addEventListener("mousePressed",(e=>{0==e.detail.button&&p.active&&(p.holding=!0,p.x=y.x,p.y=y.y,requestAnimationFrame(h))})),addEventListener("mouseReleased",(e=>{0==e.detail.button&&p.holding&&(p.holding=!1)})),addEventListener("wheel",(e=>{var t,n;n=s-e.deltaY/400,t=Math.min(Math.max(n,.2),4),s=t,i.style.setProperty("--board-zoom",`${s}`)}));var k=[];function f(e){let n=g(e);if(!n)return;let d=document.getElementById(`block-${n.token}`);return d||(d=function(e){let n=(d=e.type,t[d]);var d;if(!n)return;let i=document.createElement("div");i.classList.add("block-element"),i.id=`block-${e.token}`,o.appendChild(i);let l=document.createElement("div");l.innerText=n.name,l.classList.add("block-title");let r=document.createElement("div");r.classList.add("block-content");let s=document.createElement("div");s.classList.add("block-inputs");let a=document.createElement("div");return a.classList.add("block-outputs"),r.appendChild(s),r.appendChild(a),i.appendChild(l),i.appendChild(r),i}(n)),d}function E(e,t,n){t=t||v(y.x,y.y).x,n=n||v(y.x,y.y).y;let o={token:u(),type:e,inputNodes:[],outputNodes:[],x:t,y:n};return k.push(o),function(e){let t=f(e),n=g(e);t&&(t.style.setProperty("--position-x",`${n.x}px`),t.style.setProperty("--position-y",`${n.y}px`))}(o),o}function g(e){return"string"!=typeof e?e:k.find((t=>t.token==e))}function x(e){if(function(e){let t=f(e);t&&t.remove()}(e),"string"==typeof e)return k=k.filter(((t,n)=>t.token!=e)),!0;{const t=k.indexOf(e);if(-1!==t)return k.splice(t,1),!0}return!1}const b={};addEventListener("keydown",(e=>{b[e.key]=!0;let t=new CustomEvent("keyPressed",{detail:{key:e.key}});window.dispatchEvent(t)})),addEventListener("keyup",(e=>{b[e.key]=!1;let t=new CustomEvent("keyReleased",{detail:{key:e.key}});window.dispatchEvent(t)}));var w,$=1;async function P(e,t){if("AsyncFunction"===t.constructor.name){try{await t()?console.log(`✔️ Test ${$} "${e}" passed`):console.log(`❌ Test ${$} "${e}" failed`)}catch(t){console.log(`❌ Test ${$} "${e}" failed: ${t}`)}$++}else{try{t()?console.log(`✔️ Test ${$} "${e}" passed`):console.log(`❌ Test ${$} "${e}" failed`)}catch(t){console.log(`❌ Test ${$} "${e}" failed: ${t}`)}$++}}P("create block",(()=>"Player joined"==(w=E("Player joined")).type)),P("destroy block",(()=>x(w))),P("destroy block via token",(()=>x(w.token))),P("destroy invalid block",(()=>!x(null))),P("create block at 50x50 position",(()=>{let e=50==(w=E("Player joined",50,50)).x&&50==w.y;return x(w),e})),P("created block should create DOM element",(()=>{w=E("Player joined",50,50);let e=document.getElementById(`block-${w.token}`);return x(w),!!e})),P("destroying block should delete DOM element",(()=>{w=E("Player joined",50,50);let e=document.getElementById(`block-${w.token}`);x(w);let t=document.getElementById(`block-${w.token}`);return e&&!t})),P("create block for testing frontend purposes",(()=>!!(w=E("Player joined",50,50))))})();