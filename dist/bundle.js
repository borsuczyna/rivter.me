(()=>{"use strict";var e=null,t=null,n=null,o={width:1280,height:720};function l(){let t=window.innerWidth,n=window.innerHeight;o.width=t,o.height=n,e.canvas.width=t,e.canvas.height=n}!function(){if(e&&t&&n)return;let o=document.getElementById("editor-canvas");e=o?.getContext("2d"),t=document.getElementById("editor-window"),n=document.getElementById("editor-cursor"),l(),addEventListener("resize",l)}();const d="qwsertyuiopasdfghjklzxcvbnbmQWERETYUIOPASDFDGHJKJLZXCXVBNBM123454567890";function r(e=16){let t="";for(;t.length<e;)t+=d.charAt(Math.random()*d.length);return t}const i={x:0,y:0};function c(e){n.style.cursor=e}addEventListener("mousemove",(function(e){i.x=e.clientX,i.y=e.clientY}));var s=[];function u(e){let n=function(e){return"string"!=typeof e?e:s.find((t=>t.token==e))}(e);if(!n)return;let o=document.getElementById(`block-${n.token}`);return o||(o=function(e){let n=document.createElement("div");return n.classList.add("block-element"),n.id=`block-${e.token}`,t.appendChild(n),n}(n)),o}function a(e,t,n){t=t||i.x,n=n||i.y;let o={token:r(),type:e,inputNodes:[],outputNodes:[],x:t,y:n};return s.push(o),function(e){u(e)}(o),o}function y(e){if(function(e){let t=u(e);t&&t.remove()}(e),"string"==typeof e)return s=s.filter(((t,n)=>t.token!=e)),!0;{const t=s.indexOf(e);if(-1!==t)return s.splice(t,1),!0}return!1}var k=!1;addEventListener("keyPressed",(e=>{" "==e.detail.key&&(c("grab"),k=!0)})),addEventListener("keyReleased",(e=>{" "==e.detail.key&&k&&(c("default"),k=!1)}));const f={};addEventListener("keydown",(e=>{f[e.key]=!0;let t=new CustomEvent("keyPressed",{detail:{key:e.key}});window.dispatchEvent(t)})),addEventListener("keyup",(e=>{f[e.key]=!1;let t=new CustomEvent("keyReleased",{detail:{key:e.key}});window.dispatchEvent(t)}));var m,g=1;function h(e,t){try{t()?console.log(`✔️ Test ${g} "${e}" passed`):console.log(`❌ Test ${g} "${e}" failed`)}catch(t){console.log(`❌ Test ${g} "${e}" failed: ${t}`)}g++}h("create block",(()=>"Player joined"==(m=a("Player joined")).type)),h("destroy block",(()=>y(m))),h("destroy block via token",(()=>y(m.token))),h("destroy invalid block",(()=>!y(null))),h("create block at cursor position",(()=>{let e=(m=a("Player joined")).x==i.x&&m.y==i.y;return y(m),e})),h("create block at 50x50 position",(()=>{let e=50==(m=a("Player joined",50,50)).x&&50==m.y;return y(m),e})),h("created block should create DOM element",(()=>{m=a("Player joined",50,50);let e=document.getElementById(`block-${m.token}`);return y(m),!!e})),h("destroying block should delete DOM element",(()=>{m=a("Player joined",50,50);let e=document.getElementById(`block-${m.token}`);y(m);let t=document.getElementById(`block-${m.token}`);return e&&!t})),h("create block for testing frontend purposes",(()=>!!(m=a("Player joined",50,50))))})();