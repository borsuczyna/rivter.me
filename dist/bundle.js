(()=>{"use strict";var e,t={};e={"Player joined":{name:"Player joined",hoverTip:"Event is triggered when player joins server",motionStart:!1,motionNext:!0,inputs:[],outputs:[{name:"Player",hoverTip:"Player that joined server",type:"player"}],isEvent:!0}},t={...t,...e};var n=null,o=null,i=null,r=null,d={width:1280,height:720},l={x:0,y:0},s=1;function a(){let e=window.innerWidth,t=window.innerHeight;d.width=e,d.height=t,n.canvas.width=e,n.canvas.height=t}!function(){if(n&&o&&i&&r)return;let e=document.getElementById("editor-canvas");n=e?.getContext("2d"),o=document.getElementById("editor-window"),i=document.getElementById("editor-canvas"),r=document.querySelector(":root"),a(),addEventListener("resize",a)}();const u="qwsertyuiopasdfghjklzxcvbnbmQWERETYUIOPASDFDGHJKJLZXCXVBNBM123454567890";function c(e=16){let t="";for(;t.length<e;)t+=u.charAt(Math.random()*u.length);return t}const y={x:0,y:0};function m(e){i.style.cursor=e}addEventListener("mousemove",(function(e){y.x=e.clientX,y.y=e.clientY})),addEventListener("mousedown",(e=>{let t=new CustomEvent("mousePressed",{detail:{button:e.button}});window.dispatchEvent(t)})),addEventListener("mouseup",(e=>{let t=new CustomEvent("mouseReleased",{detail:{button:e.button}});window.dispatchEvent(t)}));var v=[];function p(e){let n=h(e);if(!n)return;let i=document.getElementById(`block-${n.token}`);return i||(i=function(e){let n=(i=e.type,t[i]);var i;if(!n)return;let r=document.createElement("div"),d=document.createElement("div");return r.classList.add("block-element"),r.id=`block-${e.token}`,o.appendChild(r),d.innerText=n.name,d.classList.add("block-title"),r.appendChild(d),r}(n)),i}function k(e,t,n){t=t||y.x,n=n||y.y;let o={token:c(),type:e,inputNodes:[],outputNodes:[],x:t,y:n};return v.push(o),function(e){let t=p(e),n=h(e);t&&(t.style.setProperty("--position-x",`${n.x}px`),t.style.setProperty("--position-y",`${n.y}px`))}(o),o}function h(e){return"string"!=typeof e?e:v.find((t=>t.token==e))}function f(e){if(function(e){let t=p(e);t&&t.remove()}(e),"string"==typeof e)return v=v.filter(((t,n)=>t.token!=e)),!0;{const t=v.indexOf(e);if(-1!==t)return v.splice(t,1),!0}return!1}var E={active:!1,holding:!1,x:0,y:0};function x(){if(!E.holding)return;let e=y.x-E.x,t=y.y-E.y;l.x+=e/s,l.y+=t/s,E.x=y.x,E.y=y.y,r.style.setProperty("--board-x",`${l.x}px`),r.style.setProperty("--board-y",`${l.y}px`),requestAnimationFrame(x)}addEventListener("keyPressed",(e=>{" "==e.detail.key&&(m("grab"),E.active=!0)})),addEventListener("keyReleased",(e=>{" "==e.detail.key&&E.active&&(m("default"),E.active=!1)})),addEventListener("mousePressed",(e=>{0==e.detail.button&&E.active&&(E.holding=!0,E.x=y.x,E.y=y.y,requestAnimationFrame(x))})),addEventListener("mouseReleased",(e=>{0==e.detail.button&&E.holding&&(E.holding=!1)})),addEventListener("wheel",(e=>{var t,n;n=s-e.deltaY/400,t=Math.min(Math.max(n,.2),4),s=t,r.style.setProperty("--board-zoom",`${s}`)}));const g={};addEventListener("keydown",(e=>{g[e.key]=!0;let t=new CustomEvent("keyPressed",{detail:{key:e.key}});window.dispatchEvent(t)})),addEventListener("keyup",(e=>{g[e.key]=!1;let t=new CustomEvent("keyReleased",{detail:{key:e.key}});window.dispatchEvent(t)}));var b,w=1;function P(e,t){try{t()?console.log(`✔️ Test ${w} "${e}" passed`):console.log(`❌ Test ${w} "${e}" failed`)}catch(t){console.log(`❌ Test ${w} "${e}" failed: ${t}`)}w++}P("create block",(()=>"Player joined"==(b=k("Player joined")).type)),P("destroy block",(()=>f(b))),P("destroy block via token",(()=>f(b.token))),P("destroy invalid block",(()=>!f(null))),P("create block at cursor position",(()=>{let e=(b=k("Player joined")).x==y.x&&b.y==y.y;return f(b),e})),P("create block at 50x50 position",(()=>{let e=50==(b=k("Player joined",50,50)).x&&50==b.y;return f(b),e})),P("created block should create DOM element",(()=>{b=k("Player joined",50,50);let e=document.getElementById(`block-${b.token}`);return f(b),!!e})),P("destroying block should delete DOM element",(()=>{b=k("Player joined",50,50);let e=document.getElementById(`block-${b.token}`);f(b);let t=document.getElementById(`block-${b.token}`);return e&&!t})),P("create block for testing frontend purposes",(()=>!!(b=k("Player joined",50,50))))})();